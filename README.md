# 소켓 통신 학습을 위한 리포지토리



### 통신은 OSI 7계층을 통해 송신과 수신의 과정을 거친다.
##### 1. 통신에서는 bit단위로 전송을 하고, 인간은 8bit 단위인 1byte로 끊어읽는다.
##### 2. 물리적으로는 광케이블로 통신의 최소 단위인 패킷으로 전송되지만, 논리적으로는 Byte Stream이다.
##### 3. 8비트 단위로 전송되는 2진수 데이터는 256가지 경우의 수로 아스키코드로 변환이 가능하다.
##### 4. 8bit는 레지스터가 처리가능한 최소 데이터 단위였기 때문에 통신의 기본 단위가 되었다.

### 신뢰할 수 있는 데이터 통신에서 필요한 통신의 신뢰성과 데이터의 신뢰성 

#### 신뢰성 있는 통신을 위한 TCP
##### (1) 가로채기, 탈취 및 내용 위조, 응답 탈취의 모든 경우의 수를 방지하는 프로토콜
##### (2) 3-way hand shake로 연결 설정 과정을 통해 데이터 전달, 응답 그리고 응답 받았다고 응답하는 과정을 포함한다.
##### (3) 즉, SYN 요청과 SYN+ACK 응답, ACK 요청이라는 일련의 과정을 통해 신뢰성있는 연결을 설정한다.

#### 신뢰성 있는 데이터 보장을 위한 CIA
#### : 데이터 훔쳐보기, 데이터 위조, 데이터 탈취의 경우의 수를 모두 보장해야 한다.
##### (1) : Confidential
##### (2) : Integrity
##### (3) : Availability

#### CIA 보장을 위한 암호화 방식
##### (1) 대칭키 암호화 : 키 전달의 문제가 존재하는 동일한 키로 암호화와 복호화가 가능한 암호화 방식 (RSA)
##### (2) 공개키 암호화 : 서로 다른 키로 암호화와 복호화를 하는 암호화 방식 (AES, DES, HMAC 512)
##### (3) 단방향 암호화 : 암호화만 가능하고, 복호화는 불가능한 암호화 방식 (SHA-512, MD5)
##### (4) 양방향 암호화 : 암호화와 복호화 모두 가능한 암호화 방식 (AES, DES, RSA)

#### 인증에 사용되는 토큰의 신뢰성을 보장하기 위한 OAuth 2.0
##### (1) 발행 주체와 검증 주체가 같을 때는 대칭키를 사용하며, HMAC512 암호화 방식을 사용한다. 이 때 키교환의 필요가 없다. (비밀키 공개 할 필요 없음)
##### (2) 발행 주체와 검증 주체가 다를 때 공개키를 사용하며, RSA 암호화 방식을 사용한다. 이 때 키교환이 필요하다. (공개키 사용해 검증)

#### 서킷 스위칭과 패킷 스위칭
##### 서킷 스위칭 : 전용선을 가진 직접 연결 통신 방식
##### 패킷 스위칭 : 회선을 공유해서 동시에 처리되도록 패킷 단위로 쪼개서 전달하는 방식으로 장비가 필요

##### 패킷을 순서대로 전달하기 위한 L3 장비 : 라우터
#### (1) IP 주소를 기반으로 순서대로 전달하기 위해 라우팅 테이블을 통해 경로를 찾고, 패킷을 전달한다.
#### (2) 패킷의 구조 : 보낼 데이터 정보를 담은 payload, 고유한 목적지 주소를 담은 IP, IP 주소를 담은 그릇 헤더
#### (3) 라우터에서는 전달 받은 패킷을 트래픽과 경로를 보고 다음 경로를 설정하는 패킷 포워딩을 수행한다.
#### (4) L4 계층에서 소프트웨어 기반으로 전달받은 패킷의 재조합을 수행한다.
#### 따라서, TCP/IP 프로토콜에서 패킷 스위칭을 통해 패킷을 최적의 경로로 순서없이 전달하면, 페킷 헤더를 보고 일련번호와 확인응답번호를 통해 연결 후,
#### 확인 응답번호를 사용해 데이터가 손실 없이 정확하게 전송되었는지 확인하면서 패킷을 올바른 순서로 재조립한다.

## 통신의 종류에는 단방향 통신과 양방향 통신이 존재하고,
## 양방향 통신에는 반이중 통신과 전이중 통신이 존재한다.

## 반이중 통신
### 1. 반이중 통신은 통신선이 하나로, 동시에 데이터를 송수신이 불가능하다.
### 2. 반이중 통신은 간섭을 최소화할 수 있다는 특징과 비용이 적게 든다는 특징을 갖는다.
### 3. 따라서 양방향 통신이 필요하지 않는 경우, 원격 제어 시스템같은 경우에 사용하기도 한다.
### 즉, 반이중 통신은 동기적으로 동작하며 요청을 대기하다가 요청이 오면 즉시 응답을 반환하는 사용자 스레드로  
### 클라이언트의 요청이 있을 때만 동작하는 일반적인 서버와 같은 데몬 스레드가 아니다.


## 전이중 통신
### 1. 선은 하나지만, 스트림이 2개인 서버로 동시에 데이터 송수신이 가능하다.
### 2. 웹 소켓으로 구현할 수 있다.
### 3. 일반적인 서버보다는, 실시간 채팅 혹은 온라인 게임 같은 즉각적인 상호작용이 필요할 때 사용한다.

## 서버의 조건
### (1) 반이중 서버로 동시 요청을 와도 동기적으로 순차 처리한다.(게임이나 채팅 같은 즉각 처리가 필요한 서버 제외)
### (2) 데몬 스레드
### (3) 멀티 스레드로 동시접속처리

### 한 번에 클라이언트 한 명만 가능한 싱글 스레드기반 서버에서 동시에 여러명을 받기 위해서 멀티 스레드 서버로 발전했다.
### 이를 통해 하나의 스레드마다 하나의 클라이언트를 할당해 여러명의 클라이언트의 요청을 동시에 처리 가능하게 된다.
### 여러명의 요청을 라운드 로빈 스케줄링을 이용해서 시간할당량을 지정해 스레드간 전환하면서 수행함으로써, 사용자는 동시에 처리하는 것처럼 보이게 만든다.

